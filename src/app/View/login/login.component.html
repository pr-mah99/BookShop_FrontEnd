<!-- login.component.html -->
<div class="centered-div">
<div class="container" *ngIf="loginService.loginState" class="card">
  <div class="contant">
  
    <img style="width: 250px;height: 250px;" src="../../../assets/images/user.png" />
    <p style="font-weight:900;">{{ loginService.userData?.fullname }}</p>
    <p>{{ loginService.userData?.email }}</p>

    <button mat-raised-button (click)="signOut()">تسجيل الخروج</button>

  </div>
</div>


<div class="login-container" *ngIf="!loginService.loginState">
  <div class="container">
  <div>
    <div class="toggle-buttons">
      <button (click)="showLoginForm = true" [class.active]="showLoginForm">تسجيل الدخول</button>
      <button (click)="showLoginForm = false" [class.active]="!showLoginForm">إنشاء حساب جديد</button>
    </div>

    <div class="loading-container-small" *ngIf="loading; else dataContent">
      <!-- عرض Progress Spinner في المنتصف أثناء التحميل -->
      <mat-progress-spinner
        mode="indeterminate"
        diameter="50"
      ></mat-progress-spinner>
      <p>جارٍ التحميل...</p>
    </div>
    
    <ng-template #dataContent>
    
    <div *ngIf="showLoginForm; else signupForm">
      <img style="width: 150px;height: 150px;" src="../../../assets/images/user.png" />
      <p>تسجيل الدخول</p>
      <form (ngSubmit)="onSubmitLogin()">
        <div class="form-group">
          <label for="email">البريد الإلكتروني</label>
          <input type="email" id="email" name="email" [(ngModel)]="loginEmail" required>
        </div>
        <div class="form-group">
          <label for="password">كلمة المرور</label>
          <input type="password" id="password" name="password" [(ngModel)]="loginPassword" required>
        </div>
        <button type="submit">تسجيل الدخول</button>
      </form>
    </div>
    
    <ng-template #signupForm>
      <img style="width: 100px;height: 100px;" src="../../../assets/images/user.png" />
      <p>إنشاء حساب جديد</p>
      <form (ngSubmit)="onSubmitSignup()">
        <div class="form-group">
          <label for="name">الاسم</label>
          <input type="text" id="name" name="name" [(ngModel)]="signupName" required>
        </div>
        <div class="form-group">
          <label for="signupEmail">البريد الإلكتروني</label>
          <input type="email" id="signupEmail" name="signupEmail" [(ngModel)]="signupEmail" required>
        </div>
        <div class="form-group">
          <label for="signupPassword">كلمة المرور</label>
          <input type="password" id="signupPassword" name="signupPassword" [(ngModel)]="signupPassword" required>
        </div>
        <button type="submit">إنشاء الحساب</button>
      </form>
    </ng-template>
    </ng-template>
  </div>
  </div>
  </div>

</div>